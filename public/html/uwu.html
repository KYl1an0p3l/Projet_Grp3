<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>√âditeur de Parcours</title>
    <link rel="stylesheet" href="../css/uwu.css">
    <style>
        /* Ajout rapide de style au cas o√π le CSS externe manque */
        body { display: flex; flex-direction: column; height: 100vh; margin: 0; font-family: sans-serif; overflow: hidden; }
        #toolbar { padding: 10px; background: #eee; border-bottom: 1px solid #ccc; display: flex; gap: 10px; }
        #main-container { flex: 1; display: flex; position: relative; overflow: hidden; }
        #workspace { flex: 1; position: relative; background: #fafafa; cursor: grab; }
        #sidebar { width: 280px; background: #fff; border-left: 1px solid #ddd; padding: 20px; box-shadow: -2px 0 5px rgba(0,0,0,0.05); z-index: 10;}
        
        .node {
            position: absolute; width: 120px; height: 80px; background: white; border: 2px solid #333;
            display: flex; align-items: center; justify-content: center; text-align: center;
            border-radius: 8px; cursor: pointer; user-select: none; z-index: 2;
            box-shadow: 3px 3px 8px rgba(0,0,0,0.15);
        }
        .node.selected { border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3); }
        
        #connections-layer { position: absolute; top:0; left:0; width:100%; height:100%; pointer-events: none; z-index: 1; }
        line { stroke: #555; stroke-width: 2; }
        
        .sidebar-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 0.9em; }
        input, textarea { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        button { padding: 8px 12px; cursor: pointer; background: #fff; border: 1px solid #ccc; border-radius: 4px; }
        button:hover { background: #f0f0f0; }
        button.active { background: #e0f2fe; border-color: #3b82f6; color: #0284c7; }
        button.primary { background: #3b82f6; color: white; border: none; }
        button.primary:hover { background: #2563eb; }
    </style>
</head>
<body>

    <div id="toolbar">
        <button onclick="addNode()">‚ûï Ajouter Page</button>
        <button id="btn-link" onclick="toggleLinkMode()">üîó Mode Liaison (OFF)</button>
        <button onclick="deleteSelected()">üóëÔ∏è Supprimer Page</button>
        <button id="btn_del" style="color:red;">‚ö†Ô∏è Tout vider</button>
    </div>

    <div id="main-container">
        <div id="workspace" onclick="handleWorkspaceClick(event)">
            <svg id="connections-layer">
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#555" />
                    </marker>
                </defs>
            </svg>
        </div>

<div id="sidebar">
    <h3>Propri√©t√©s</h3>
    
    <div class="sidebar-group">
        <button class="primary" onclick="saveData()">üíæ Sauvegarder Projet</button>
        <button onclick="importData()">üìÇ Importer</button>
        
        <button onclick="previewProject()" style="background-color: #22c55e; color: white; border: none; margin-top: 5px;">
            ‚ñ∂Ô∏è Visualiser
        </button>
        
        <input type="file" id="file-input" style="display:none;">
    </div>

    <hr>

    <div class="sidebar-group">
        <label>Nom de la page :</label>
        <input type="text" id="input-name" placeholder="S√©lectionnez un n≈ìud..." oninput="updateNodeData()">
    </div>

    <div class="sidebar-group">
        <label>Description (interne) :</label>
        <textarea id="input-desc" rows="3" placeholder="..." oninput="updateNodeData()"></textarea>
    </div>

    <div class="sidebar-group" style="margin-top: 30px;">
        <button class="primary" style="width: 100%; padding: 15px;" onclick="openSelectedPage()">
            ‚úèÔ∏è Modifier le contenu de la page
        </button>
        <p style="font-size: 0.8em; color: #666; text-align: center; margin-top: 5px;">
            Ouvre la page HTML g√©n√©r√©e
        </p>
    </div>
</div>
    <script src="../js/uwu.js"></script>
</body>
</html>